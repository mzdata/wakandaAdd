!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((e=e||self).jme={})}(this,function(e){"use strict";var a,c={default:void 0,call:function(e,a,c){var n="";"function"==typeof a&&(c=a,a={});var t={data:void 0===a?null:a};if("function"==typeof c){var o="dscb"+window.dscb++;window[o]=c,t._dscbstub=o}return t=JSON.stringify(t),window._dsbridge?n=_dsbridge.call(e,t):(window._dswk||-1!=navigator.userAgent.indexOf("_dsbridge"))&&(n=prompt("_dsbridge="+e,t)),JSON.parse(n||"{}").data},register:function(e,a,n){var t=n?window._dsaf:window._dsf;window._dsInit||(window._dsInit=!0,setTimeout(function(){c.call("_dsb.dsinit")},0)),"object"==typeof a?t._obs[e]=a:t[e]=a},registerAsyn:function(e,a){this.register(e,a,!0)},hasNativeMethod:function(e,a){return this.call("_dsb.hasNativeMethod",{name:e,type:a||"all"})},disableJavascriptDialogBlock:function(e){this.call("_dsb.disableJavascriptDialogBlock",{disable:!1!==e})}};!function(){if(!window._dsf){var e={_dsf:{_obs:{}},_dsaf:{_obs:{}},dscb:0,dsBridge:c,close:function(){c.call("_dsb.closePage")},_handleMessageFromNative:function(e){var a=JSON.parse(e.data),n={id:e.callbackId,complete:!0},t=this._dsf[e.method],o=this._dsaf[e.method],l=function(e,t){n.data=e.apply(t,a),c.call("_dsb.returnValue",n)},i=function(e,t){a.push(function(e,a){n.data=e,n.complete=!1!==a,c.call("_dsb.returnValue",n)}),e.apply(t,a)};if(t)l(t,this._dsf);else if(o)i(o,this._dsaf);else{var r=e.method.split(".");if(r.length<2)return;var s=r.pop(),d=r.join("."),u=this._dsf._obs,f=u[d]||{},g=f[s];if(g&&"function"==typeof g)return void l(g,f);if((g=(f=(u=this._dsaf._obs)[d]||{})[s])&&"function"==typeof g)return void i(g,f)}}};for(var a in e)window[a]=e[a];c.register("_hasJavascriptMethod",function(e,a){var c=e.split(".");if(c.length<2)return!(!_dsf[c]&&!_dsaf[c]);e=c.pop();var n=c.join("."),t=_dsf._obs[n]||_dsaf._obs[n];return t&&!!t[e]})}}(),window.dsBridge?a=function(e,a){dsBridge.call("onAjaxRequest",e,function(c){c=JSON.parse(c),"stream"===e.responseType&&function(e){var a=e.headers||{},c=(a["content-type"]||a["Content-Type"]||"").toString().toLowerCase();-1!==c.indexOf("image")&&-1===e.responseText.indexOf("base64")&&(e.responseText="data:"+c+";base64,"+e.responseText)}(c),a(c)})}:console.error("dsBridge is not exist!");var n="undefined"!=typeof document;function t(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function o(){if(window&&window.location.protocol.indexOf("file")>-1){var e=function(e){var a=function(){this.requestHeaders={},this.readyState=0,this.timeout=0,this.responseURL="",this.responseHeaders={}};return a.prototype._call=function(e){this[e]&&this[e].apply(this,[].splice.call(arguments,1))},a.prototype._changeReadyState=function(e){this.readyState=e,this._call("onreadystatechange")},a.prototype.open=function(e,a){if(this.method=e,a){if(0!==(a=t(a)).indexOf("http")&&n){var c=document.createElement("a");c.href=a,a=c.href}}else a=location.href;this.responseURL=a,this._changeReadyState(1)},a.prototype.send=function(a){var c=this;a=a||null;var t=this;if(e){var o,l={method:t.method,url:t.responseURL,headers:t.requestHeaders||{},body:a};!function(e,a){for(var c in a)e.hasOwnProperty(c)?this.isObject(a[c],1)&&this.isObject(e[c],1)&&this.merge(e[c],a[c]):e[c]=a[c]}(l,t._options||{}),"GET"===l.method&&(l.body=null),t._changeReadyState(3),t.timeout=t.timeout||0,t.timeout>0&&(o=setTimeout(function(){3===t.readyState&&(c._call("onloadend"),t._changeReadyState(0),t._call("ontimeout"))},t.timeout)),l.timeout=t.timeout,e(l,function(e){function a(a){var c=e[a];return delete e[a],c}if(3===t.readyState){clearTimeout(o),t.status=a("statusCode")-0;var c=a("responseText"),l=a("statusMessage");if(t.status){var i=a("headers"),r={};for(var s in i){var d=i[s],u=s.toLowerCase();"object"==typeof d?r[u]=d:(r[u]=r[u]||[],r[u].push(d))}var f=r["set-cookie"];n&&f&&f.forEach(function(e){document.cookie=e.replace(/;\s*httpOnly/gi,"")}),t.responseHeaders=r,t.statusText=l||"",t.response=t.responseText=c,t._response=e,t._changeReadyState(4),t._call("onload")}else t.statusText=c,t._call("onerror",{msg:l});t._call("onloadend")}})}else console.error("Ajax require adapter")},a.prototype.setRequestHeader=function(e,a){this.requestHeaders[t(e)]=a},a.prototype.getResponseHeader=function(e){return(this.responseHeaders[e.toLowerCase()]||"").toString()||null},a.prototype.getAllResponseHeaders=function(){var e="";for(var a in this.responseHeaders)e+=a+":"+this.getResponseHeader(a)+"\r\n";return e||null},a.prototype.abort=function(e){this._changeReadyState(0),this._call("onerror",{msg:e}),this._call("onloadend")},a.setAdapter=function(a){e=a},a}(a);XMLHttpRequest=e}}var l={getDeviceInfo:function(){return dsBridge.call("devinfo.deviceInfo")},authentication:function(e){dsBridge.call("devinfo.authentication",e,function(a){e.callback&&e.callback(a)})},getFacialImage:function(e){dsBridge.call("devinfo.getFacialImage",e,function(a){e.callback&&e.callback(a)})}},i={getAppInfo:function(){return dsBridge.call("appInfo.appInfo")},getH5AppInfo:function(e){dsBridge.call("application.getH5AppInfo",e,function(a){e.callback&&e.callback(a)})},canOpenUrl:function(){return dsBridge.call("application.canOpenUrl")},openAppletUrl:function(e){dsBridge.call("application.openUrl",{url:e.url},function(a){e.success&&e.success(a)})},openSetting:function(e){dsBridge.call("application.openSetting",e,function(a){e.callback&&e.callback(a)})},getH5AppInfo:function(e){dsBridge.call("application.getH5AppInfo",e,function(a){e.callback&&e.callback(a)})}},r={openCamera:function(e){dsBridge.call("camera.shooting",{},function(a){e&&e(a)})},openCameraEx:function(e){dsBridge.call("camera.shooting",e,function(a){e.callback&&e.callback(a)})}},s={chooseImage:function(e){var a=e;"boolean"!=typeof e.multiple&&(e.multiple=!1),"number"!=typeof e.count&&(e.count=9),a.multiple?dsBridge.call("photoalbum.chooseASetPhoto",{count:a.count},function(e){a.success&&a.success(e)}):dsBridge.call("photoalbum.chooseAPhoto",function(e){a.success&&a.success(e)})},getImageBase64:function(e){dsBridge.call("photoalbum.chooseAPhoto",function(a){var c=dsBridge.call("file.getFileData",{filePath:a.localUrl,format:"base64"});e.success&&e.success({base64:"data:image/jpeg;base64,"+c})})},saveImage:function(e){dsBridge.call("photoalbum.saveImage",e,function(a){e.callback&&e.callback(a)})}},d={setNaviBarHidden:function(e){null===e&&(a=!0);var a=e;dsBridge.call("browser.setNaviBarHidden",{isHidden:a})},showNaviBarCloseButton:function(e){"boolean"!=typeof e.showCloseButton&&(e.showCloseButton=!1),dsBridge.call("browser.showNaviBarCloseButton",e,function(a){e.callback&&e.callback(a)})},closeWeb:function(e){dsBridge.call("browser.close",e,function(a){e.callback&&e.callback(a)})},refreshWeb:function(){dsBridge.call("browser.refresh")},goback:function(){dsBridge.call("browser.goback")},forward:function(){dsBridge.call("browser.forward")},showError:function(e){var a=e;dsBridge.call("browser.showError",{errCode:a.errCode,message:a.message})},openUrl:function(e){var a=e;"number"!=typeof e.type&&(e.type=1),"boolean"!=typeof e.isHideNaviBar&&(e.isHideNaviBar=!1);var c={url:a.url,isHideNaviBar:a.isHideNaviBar};switch(a.type){case 1:dsBridge.call("browser.openUrl",c);break;case 2:dsBridge.call("browser.openLocalUrl",c);break;case 3:dsBridge.call("browser.openDeepLink",c);break;case 4:dsBridge.call("browser.openSafariUrl",{url:a.url})}},openSafariUrl:function(e){dsBridge.call("browser.openSafariUrl",e,function(a){e.callback&&e.callback(a)})},callDeepLink:function(e){dsBridge.call("browser.callDeepLink",e,function(a){e.callback&&e.callback(a)})},setShareButtonHidden:function(){dsBridge.call("browser.setShareButtonHidden",{isHidden:!0})},setShareButtonShow:function(){dsBridge.call("browser.setShareButtonShow",{isHidden:!1})},onKeyboardHeightChange:function(e){dsBridge.call("browser.onKeyboardHeightChange",function(a){e.change&&e.change(a)})},setPopAllowedLeftEdge:function(e){dsBridge.call("browser.setPopAllowedLeftEdge",{persent:e.persent||0})},setGoBackDisabled:function(e){var a=e;"boolean"!=typeof e.disabled&&(e.disabled=!1),dsBridge.call("browser.setGoBackDisabled",a,function(a){e.callback&&e.callback(a)})},setScrollDisabled:function(e){var a=e;"boolean"!=typeof e.disabled&&(e.disabled=!1),dsBridge.call("browser.setScrollDisabled",a,function(a){e.callback&&e.callback(a)})},setAllowsBackForwardNavigationGestures:function(e){"boolean"!=typeof e.allow&&(e.allow=!0),dsBridge.call("browser.setAllowsBackForwardNavigationGestures",e,function(a){e.callback&&e.callback(a)})},setNavigationBarTitle:function(e){dsBridge.call("browser.setNavigationBarTitle",e,function(a){e.callback&&e.callback(a)})},resetSysMenu:function(e){dsBridge.call("browser.resetSysMenu",e,function(a){e.callback&&e.callback(a)})}},u={getNetworkStatus:function(e){return dsBridge.call("network.networkStatus",function(a){e&&e({status:a})})},uploadFile:function(e){"boolean"!=typeof e.needAuthn&&(e.needAuthn=!1),"boolean"!=typeof e.needCdn&&(e.needCdn=!1),dsBridge.call("network.uploadFile",e,function(a){e.callback&&e.callback(a)})},downloadFile:function(e){dsBridge.call("network.downloadFile",e,function(a){e.callback&&e.callback(a)})}},f={scanCode:function(e){dsBridge.call("imagescan.scanning",function(a){e&&e(a)})},scanCodeEx:function(e){var a=e;"object"!=typeof e.scanType&&(e.scanType=["barCode","qrCode"]),"boolean"!=typeof e.onlyFromCamera&&(e.onlyFromCamera=!1),dsBridge.call("imagescan.scanning",a,function(a){e.callback&&e.callback(a)})},scanOCR:function(e){var a=e;"object"!=typeof e.scanType&&(e.scanType=["document"]),"boolean"!=typeof e.onlyFromCamera&&(e.onlyFromCamera=!1),dsBridge.call("imagescan.scanOCR",a,function(a){e.callback&&e.callback(a)})}},g={shareNormal:function(e,a){var c=e;dsBridge.call("share.share",c,function(e){a&&a(e)})},shareCustom:function(e){var a=e;dsBridge.call("share.shareCustom",a,function(a){e.callback&&e.callback(a)})},shareSystem:function(e){dsBridge.call("share.shareSystem",e,function(a){e.callback&&e.callback(a)})},initShareCustom:function(e){dsBridge.call("share.initShareCustom",e,function(a){e.callback&&e.callback(a)})},showCustomMenu:function(e){dsBridge.call("share.showCustomMenu",e,function(a){e.callback&&e.callback(a)})}},b={setStorage:function(e){dsBridge.call("storageKV.setObject",{obj:e.value,key:e.key})},getStorage:function(e){return dsBridge.call("storageKV.objForKey",{key:e.key})},removeStorage:function(e){dsBridge.call("storageKV.removeObjForKey",{key:e.key})},clearStorage:function(){dsBridge.call("storageKV.clear")}},p={sendShareCardMessage:function(e){dsBridge.call("im.sendShareCardMessage",e,function(a){e.callback&&e.callback(a)})},openContactSelector:function(e){var a=e;"number"!=typeof e.maxNum&&(e.maxNum=50),dsBridge.call("im.openContactSelector",a,function(a){e.callback&&e.callback(a)})},openContactsSelector:function(e){"number"!=typeof e.maxNumber&&(e.maxNumber=50),"number"!=typeof e.action&&(e.action=0),"boolean"!=typeof e.multiselect&&(e.multiselect=!1),dsBridge.call("im.openContactsSelector",e,function(a){e.callback&&e.callback(a)})},openContactsSelectorPro:function(e){"number"!=typeof e.maxNumber&&(e.maxNumber=200),"number"!=typeof e.action&&(e.action=0),"boolean"!=typeof e.multiselect&&(e.multiselect=!1),dsBridge.call("im.openContactsSelectorPro",e,function(a){e.callback&&e.callback(a)})},openContactsCard:function(e){dsBridge.call("im.openContactsCard",e,function(a){e.callback&&e.callback(a)})},openSingleChat:function(e){dsBridge.call("im.openSingleChat",e,function(a){e.callback&&e.callback(a)})},openGroupChat:function(e){dsBridge.call("im.openGroupChat",e,function(a){e.callback&&e.callback(a)})},openSingleChat:function(e){dsBridge.call("im.openSingleChat",e,function(a){e.callback&&e.callback(a)})},openGroupChat:function(e){dsBridge.call("im.openGroupChat",e,function(a){e.callback&&e.callback(a)})}},k={scanQRCode:function(e){dsBridge.call("image.scanQRCode",e,function(a){e.callback&&e.callback(a)})},saveToPhotoAlbum:function(e){dsBridge.call("image.saveToPhotoAlbum",e,function(a){e.callback&&e.callback(a)})}},h={startSpeechRecognition:function(e){dsBridge.call("speechrecognition.startSpeechRecognition",function(a){e.callback&&e.callback(a)})}},m={portrait:function(){dsBridge.call("screencontrol.portrait")},landscape:function(){dsBridge.call("screencontrol.landscape")}},B={getFileData:function(e){var a=e;return"string"!=typeof e.filePath&&(e.filePath=""),"string"!=typeof e.format&&(e.format="base64"),"data:image/jpeg;base64,"+dsBridge.call("file.getFileData",{filePath:a.filePath,format:a.format})},chooseFile:function(e){dsBridge.call("file.chooseFile",e,function(a){e.callback&&e.callback(a)})},chooseFileFromJS:function(e){dsBridge.call("file.chooseFileFromJS",e,function(a){e.callback&&e.callback(a)})},saveFile:function(e){dsBridge.call("file.saveFile",e,function(a){e.callback&&e.callback(a)})},openDocument:function(e){dsBridge.call("file.openDocument",e,function(a){e.callback&&e.callback(a)})}},v={getJDPinToken:function(e){dsBridge.call("userinfo.getJDPinToken",{url:e.url},function(a){e.success&&e.success(a)})},getUserInfo:function(e){return dsBridge.call("userinfo.getUserInfo",e,function(a){e.callback&&e.callback(a)})}},y={getJDPinToken:function(e){dsBridge.call("login.getJDPinToken",{url:e.url},function(a){e.callback&&e.callback(a)})},getOTPSeed:function(e){var a=e;dsBridge.call("login.getOTPSeed",a,function(a){e.callback&&e.callback(a)})},getOTP:function(e){var a=e;"number"!=typeof e.length&&(e.length=0),dsBridge.call("login.getOTP",a,function(a){e.callback&&e.callback(a)})},getAuthorizationCode:function(e){dsBridge.call("login.getAuthorizationCode",e,function(a){e.callback&&e.callback(a)})},getAccountIdentifier:function(e){dsBridge.call("login.getAccountIdentifier",e,function(a){e.callback&&e.callback(a)})},getAccountInfo:function(e){dsBridge.call("login.getAccountInfo",e,function(a){e.callback&&e.callback(a)})},logout:function(e){dsBridge.call("login.logout",e,function(a){e.callback&&e.callback(a)})}},w={eventCustom:function(e){dsBridge.call("datacollection.eventCustom",e,function(a){e.callback&&e.callback(a)})},eventPerformance:function(e){dsBridge.call("datacollection.eventPerformance",e,function(a){e.callback&&e.callback(a)})},eventPageView:function(e){dsBridge.call("datacollection.eventPageView",e,function(a){e.callback&&e.callback(a)})},eventExposure:function(e){dsBridge.call("datacollection.eventExposure",e,function(a){e.callback&&e.callback(a)})},eventException:function(e){dsBridge.call("datacollection.eventException",e,function(a){e.callback&&e.callback(a)})},eventClick:function(e){dsBridge.call("datacollection.eventClick",e,function(a){e.callback&&e.callback(a)})}},S={getUserCertificate:function(e){dsBridge.call("mail.getUserCertificate",e,function(a){e.callback&&e.callback(a)})},getRecipientCertificate:function(e){dsBridge.call("mail.getRecipientCertificate",e,function(a){e.callback&&e.callback(a)})},decryptSMail:function(e){dsBridge.call("mail.decryptSMail",e,function(a){e.callback&&e.callback(a)})},getSMailInlineImage:function(e){dsBridge.call("mail.getSMailInlineImage",e,function(a){e.callback&&e.callback(a)})},sendSMail:function(e){dsBridge.call("mail.sendSMail",e,function(a){e.callback&&e.callback(a)})},openAttachment:function(e){dsBridge.call("mail.openAttachment",e,function(a){e.callback&&e.callback(a)})}},C={downloadFile:function(e){dsBridge.call("jpan.downloadFile",e,function(a){e.callback&&e.callback(a)})},openFile:function(e){dsBridge.call("jpan.openFile",e,function(a){e.callback&&e.callback(a)})}},_={startLocationUpdate:function(e){dsBridge.call("location.startLocationUpdate",function(a){e.callback&&e.callback(a)})},stopLocationUpdate:function(e){dsBridge.call("location.stopLocationUpdate",function(a){e.callback&&e.callback(a)})},getLocation:function(e){dsBridge.call("location.getLocation",function(a){e.callback&&e.callback(a)})}},A={startRecord:function(e){dsBridge.call("voice.startRecord",e,function(a){e.callback&&e.callback(a)})},stopRecord:function(e){dsBridge.call("voice.stopRecord",e,function(a){e.callback&&e.callback(a)})},openRecorder:function(e){dsBridge.call("voice.openRecorder",e,function(a){e.callback&&e.callback(a)})}},R={openMeetingRoom:function(e){dsBridge.call("meeting.openMeetingRoom",e,function(a){e.callback&&e.callback(a)})},createMeeting:function(e){dsBridge.call("meeting.createMeeting",e,function(a){e.callback&&e.callback(a)})}},x={goActivityWay:function(e){dsBridge.call("map.goActivityWay",e,function(a){e.callback&&e.callback(a)})}},F={sendEvent:function(e){dsBridge.call("event.sendEvent",e,function(a){e.callback&&e.callback(a)})}};o(),e.initDsBridge=o,e.device=l,e.applet=i,e.camera=r,e.album=s,e.browser=d,e.network=u,e.scan=f,e.share=g,e.storage=b,e.im=p,e.image=k,e.speechrecognition=h,e.screen=m,e.file=B,e.user=v,e.login=y,e.datacollection=w,e.mail=S,e.jpan=C,e.location=_,e.voice=A,e.meeting=R,e.map=x,e.version="1.0.16",e.event=F,Object.defineProperty(e,"__esModule",{value:!0})});
